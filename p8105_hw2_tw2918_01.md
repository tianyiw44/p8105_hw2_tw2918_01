p8105_hw2_tw2918_01
================
2023-09-30

``` r
library(tidyverse)
library(readxl)
```

# Probelm 1

## 1. Clean the data in pols-month.csv.

### (1) Use `separate()` to break up the variable `mon` into integer variables `year`, `month`, and `day`

### (2) replace month number with month abbreviation

### (3) create a `president` variable taking values `gop` and `dem`, and remove `prez_dem` and `prez_gop`

### (4) remove `day` variable

``` r
month_df = 
  tibble(
    month_num = 1:12,
    month_abb = month.abb,
    month = month.name
  )
```

``` r
pols_month_df = 
  read_csv("./fivethirtyeight_datasets/pols-month.csv")|>
  janitor::clean_names()|>
  separate(mon, into = c("year", "month_num", "day"), convert = TRUE)|>
  mutate(
    president = recode(prez_gop, "0" = "dem", "1" = "gop", "2" = "gop")) |>
  left_join(x = _, y = month_df) |> 
  select(year, month, everything(), -month_abb, -day, -starts_with("prez"))
```

## 2. clean the data in snp.csv using a similar process to the above

### (1) Use `separate()` to break up the variable `date` into integer variables `year`, `month`, and `day`

### (2) replace month number with month abbreviation and remove `day` varialbe

### (3) arrange according to year and month

``` r
snp_df = 
  read_csv("./fivethirtyeight_datasets/snp.csv")|>
  janitor::clean_names()|>
  separate(date, into = c("month", "day", "year"), convert = TRUE) |>
  arrange(year, month)|>
  mutate(month = month.name[as.numeric(month)])|>
  select(year, month,close)
```

## 3. tidy the unemployment data

``` r
unemp_df = 
  read_csv("./fivethirtyeight_datasets/unemployment.csv")|>
  rename(year = Year) |>
  pivot_longer(
    Jan:Dec, 
    names_to = "month_abb",
    values_to = "unemployment"
  ) |> 
  left_join(x = _, y = month_df) |> 
  select(year, month, unemployment)
```

## 4. Join the datasets by merging `snp` into `pols`, and merging `unemployment` into the result

# Probelm 2

## 1. Read and Clearn Mr. Trash Wheel Dataset

``` r
mr_trashwheel_df = 
  read_excel( "./202207 Trash Wheel Collection Data.xlsx", 
    sheet = "Mr. Trash Wheel",
    range = "A2:N549"
    ) |>
  janitor::clean_names()|>
  mutate(
    homes_powered_new = weight_tons*500/30,
    trash_wheel="mr_trash_wheel",
    year=as.numeric(year))
```

## 2. Use a similar process to import, clean, and organize the data for Professor Trash Wheel

``` r
pf_trashwheel_df = 
  read_excel( "./202207 Trash Wheel Collection Data.xlsx", 
    sheet = "Professor Trash Wheel",
    range = "A2:M96"
    ) |>
  janitor::clean_names()|>
  mutate(
    homes_powered_new = weight_tons*500/30,
    trash_wheel = "professor_trash_wheel")
```

## 3. Use a similar process to import, clean, and organize the data for Gwynnda Trash Wheel

``` r
gwy_trashwheel_df=
  read_excel( "./202207 Trash Wheel Collection Data.xlsx", 
    sheet = "Gwynnda Trash Wheel",
    range = "A2:K108"
    ) |>
  janitor::clean_names()|>
  mutate(
    homes_powered_new = weight_tons*500/30,
    trash_wheel = "gwynnda_trash_wheel")
```

## 4 Combine Datasets

First, changed the above code to state which trash wheel is which
Second, unify variable type. fixed the column type of year variable in
Mr. Trash Wheel Dataset. Third combine datasets using `full_join` sine
we want to keep all values in three datasets.

``` r
mr_pf_trashwheel_df = 
  full_join(mr_trashwheel_df, pf_trashwheel_df)

trashwheel_df = 
  full_join(mr_pf_trashwheel_df, gwy_trashwheel_df)
```
